<!DOCTYPE html>
<html lang="en" itemscope itemtype="http://schema.org/Article">
  
<head>
  <meta charset="utf-8"/>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"/>

  <title>Plugins - OAuth 2.0 Authentication | Kong - Open-Source API Management and Microservice Management</title>
  <meta name="description" content="Secure, Manage &amp; Extend your APIs or Microservices with plugins for authentication, logging, rate-limiting, transformations and more.">
  <meta name="author" content="KongHQ"/>
  <meta property="og:title" content="Open-Source API Management and Microservice Management"/>
  <meta property="og:site_name" content="Kong"/>
  <!-- use share link for facebook -->
  <meta property="og:url" content="https://docs.konghq.com"/>
  <meta property="og:description" content="Secure, Manage &amp; Extend your APIs or Microservices with plugins for authentication, logging, rate-limiting, transformations and more."/>
  <meta property="og:type" content="website"/>
  <meta property="og:locale" content="en_US"/>
  <meta property="og:image" content="https://docs.konghq.com/assets/images/share.png"/>
  <meta name="twitter:card" content="summary_large_image"/>
  <meta name="twitter:site" content="@thekonginc"/>
  <meta name="twitter:creator" content="@thekonginc"/>
  <meta name="twitter:url" content="https://docs.konghq.com"/>
  <meta name="twitter:description" content="Secure, Manage &amp; Extend your APIs or Microservices with plugins for authentication, logging, rate-limiting, transformations and more.">
  <meta name="twitter:image" content="https://docs.konghq.com/assets/images/share.png">
  <meta property="fb:admins" content="227304446"/>
  <meta property="fb:admins" content="576641408"/>
  <meta name="google-site-verification" content="CrU3zp02dNKTe8NSAipL4NCPkrIjDXG8fViTZ-MIzP4"/>

  <!-- New Relic -->
  <script>
/* eslint-disable */
window.NREUM||(NREUM={}),__nr_require=function(t,e,n){function r(n){if(!e[n]){var o=e[n]={exports:{}};t[n][0].call(o.exports,function(e){var o=t[n][1][e];return r(o||e)},o,o.exports)}return e[n].exports}if("function"==typeof __nr_require)return __nr_require;for(var o=0;o<n.length;o++)r(n[o]);return r}({1:[function(t,e,n){function r(t){try{c.console&&console.log(t)}catch(e){}}var o,i=t("ee"),a=t(15),c={};try{o=localStorage.getItem("__nr_flags").split(","),console&&"function"==typeof console.log&&(c.console=!0,o.indexOf("dev")!==-1&&(c.dev=!0),o.indexOf("nr_dev")!==-1&&(c.nrDev=!0))}catch(s){}c.nrDev&&i.on("internal-error",function(t){r(t.stack)}),c.dev&&i.on("fn-err",function(t,e,n){r(n.stack)}),c.dev&&(r("NR AGENT IN DEVELOPMENT MODE"),r("flags: "+a(c,function(t,e){return t}).join(", ")))},{}],2:[function(t,e,n){function r(t,e,n,r,o){try{d?d-=1:i("err",[o||new UncaughtException(t,e,n)])}catch(c){try{i("ierr",[c,(new Date).getTime(),!0])}catch(s){}}return"function"==typeof f&&f.apply(this,a(arguments))}function UncaughtException(t,e,n){this.message=t||"Uncaught error with no additional information",this.sourceURL=e,this.line=n}function o(t){i("err",[t,(new Date).getTime()])}var i=t("handle"),a=t(16),c=t("ee"),s=t("loader"),f=window.onerror,u=!1,d=0;s.features.err=!0,t(1),window.onerror=r;try{throw new Error}catch(l){"stack"in l&&(t(8),t(7),"addEventListener"in window&&t(5),s.xhrWrappable&&t(9),u=!0)}c.on("fn-start",function(t,e,n){u&&(d+=1)}),c.on("fn-err",function(t,e,n){u&&(this.thrown=!0,o(n))}),c.on("fn-end",function(){u&&!this.thrown&&d>0&&(d-=1)}),c.on("internal-error",function(t){i("ierr",[t,(new Date).getTime(),!0])})},{}],3:[function(t,e,n){t("loader").features.ins=!0},{}],4:[function(t,e,n){function r(t){}if(window.performance&&window.performance.timing&&window.performance.getEntriesByType){var o=t("ee"),i=t("handle"),a=t(8),c=t(7),s="learResourceTimings",f="addEventListener",u="resourcetimingbufferfull",d="bstResource",l="resource",p="-start",h="-end",m="fn"+p,w="fn"+h,v="bstTimer",y="pushState";t("loader").features.stn=!0,t(6);var g=NREUM.o.EV;o.on(m,function(t,e){var n=t[0];n instanceof g&&(this.bstStart=Date.now())}),o.on(w,function(t,e){var n=t[0];n instanceof g&&i("bst",[n,e,this.bstStart,Date.now()])}),a.on(m,function(t,e,n){this.bstStart=Date.now(),this.bstType=n}),a.on(w,function(t,e){i(v,[e,this.bstStart,Date.now(),this.bstType])}),c.on(m,function(){this.bstStart=Date.now()}),c.on(w,function(t,e){i(v,[e,this.bstStart,Date.now(),"requestAnimationFrame"])}),o.on(y+p,function(t){this.time=Date.now(),this.startPath=location.pathname+location.hash}),o.on(y+h,function(t){i("bstHist",[location.pathname+location.hash,this.startPath,this.time])}),f in window.performance&&(window.performance["c"+s]?window.performance[f](u,function(t){i(d,[window.performance.getEntriesByType(l)]),window.performance["c"+s]()},!1):window.performance[f]("webkit"+u,function(t){i(d,[window.performance.getEntriesByType(l)]),window.performance["webkitC"+s]()},!1)),document[f]("scroll",r,{passive:!0}),document[f]("keypress",r,!1),document[f]("click",r,!1)}},{}],5:[function(t,e,n){function r(t){for(var e=t;e&&!e.hasOwnProperty(u);)e=Object.getPrototypeOf(e);e&&o(e)}function o(t){c.inPlace(t,[u,d],"-",i)}function i(t,e){return t[1]}var a=t("ee").get("events"),c=t(17)(a,!0),s=t("gos"),f=XMLHttpRequest,u="addEventListener",d="removeEventListener";e.exports=a,"getPrototypeOf"in Object?(r(document),r(window),r(f.prototype)):f.prototype.hasOwnProperty(u)&&(o(window),o(f.prototype)),a.on(u+"-start",function(t,e){var n=t[1],r=s(n,"nr@wrapped",function(){function t(){if("function"==typeof n.handleEvent)return n.handleEvent.apply(n,arguments)}var e={object:t,"function":n}[typeof n];return e?c(e,"fn-",null,e.name||"anonymous"):n});this.wrapped=t[1]=r}),a.on(d+"-start",function(t){t[1]=this.wrapped||t[1]})},{}],6:[function(t,e,n){var r=t("ee").get("history"),o=t(17)(r);e.exports=r,o.inPlace(window.history,["pushState","replaceState"],"-")},{}],7:[function(t,e,n){var r=t("ee").get("raf"),o=t(17)(r),i="equestAnimationFrame";e.exports=r,o.inPlace(window,["r"+i,"mozR"+i,"webkitR"+i,"msR"+i],"raf-"),r.on("raf-start",function(t){t[0]=o(t[0],"fn-")})},{}],8:[function(t,e,n){function r(t,e,n){t[0]=a(t[0],"fn-",null,n)}function o(t,e,n){this.method=n,this.timerDuration="number"==typeof t[1]?t[1]:0,t[0]=a(t[0],"fn-",this,n)}var i=t("ee").get("timer"),a=t(17)(i),c="setTimeout",s="setInterval",f="clearTimeout",u="-start",d="-";e.exports=i,a.inPlace(window,[c,"setImmediate"],c+d),a.inPlace(window,[s],s+d),a.inPlace(window,[f,"clearImmediate"],f+d),i.on(s+u,r),i.on(c+u,o)},{}],9:[function(t,e,n){function r(t,e){d.inPlace(e,["onreadystatechange"],"fn-",c)}function o(){var t=this,e=u.context(t);t.readyState>3&&!e.resolved&&(e.resolved=!0,u.emit("xhr-resolved",[],t)),d.inPlace(t,w,"fn-",c)}function i(t){v.push(t),h&&(g=-g,b.data=g)}function a(){for(var t=0;t<v.length;t++)r([],v[t]);v.length&&(v=[])}function c(t,e){return e}function s(t,e){for(var n in t)e[n]=t[n];return e}t(5);var f=t("ee"),u=f.get("xhr"),d=t(17)(u),l=NREUM.o,p=l.XHR,h=l.MO,m="readystatechange",w=["onload","onerror","onabort","onloadstart","onloadend","onprogress","ontimeout"],v=[];e.exports=u;var y=window.XMLHttpRequest=function(t){var e=new p(t);try{u.emit("new-xhr",[e],e),e.addEventListener(m,o,!1)}catch(n){try{u.emit("internal-error",[n])}catch(r){}}return e};if(s(p,y),y.prototype=p.prototype,d.inPlace(y.prototype,["open","send"],"-xhr-",c),u.on("send-xhr-start",function(t,e){r(t,e),i(e)}),u.on("open-xhr-start",r),h){var g=1,b=document.createTextNode(g);new h(a).observe(b,{characterData:!0})}else f.on("fn-end",function(t){t[0]&&t[0].type===m||a()})},{}],10:[function(t,e,n){function r(t){var e=this.params,n=this.metrics;if(!this.ended){this.ended=!0;for(var r=0;r<d;r++)t.removeEventListener(u[r],this.listener,!1);if(!e.aborted){if(n.duration=(new Date).getTime()-this.startTime,4===t.readyState){e.status=t.status;var i=o(t,this.lastSize);if(i&&(n.rxSize=i),this.sameOrigin){var a=t.getResponseHeader("X-NewRelic-App-Data");a&&(e.cat=a.split(", ").pop())}}else e.status=0;n.cbTime=this.cbTime,f.emit("xhr-done",[t],t),c("xhr",[e,n,this.startTime])}}}function o(t,e){var n=t.responseType;if("json"===n&&null!==e)return e;var r="arraybuffer"===n||"blob"===n||"json"===n?t.response:t.responseText;return h(r)}function i(t,e){var n=s(e),r=t.params;r.host=n.hostname+":"+n.port,r.pathname=n.pathname,t.sameOrigin=n.sameOrigin}var a=t("loader");if(a.xhrWrappable){var c=t("handle"),s=t(11),f=t("ee"),u=["load","error","abort","timeout"],d=u.length,l=t("id"),p=t(14),h=t(13),m=window.XMLHttpRequest;a.features.xhr=!0,t(9),f.on("new-xhr",function(t){var e=this;e.totalCbs=0,e.called=0,e.cbTime=0,e.end=r,e.ended=!1,e.xhrGuids={},e.lastSize=null,p&&(p>34||p<10)||window.opera||t.addEventListener("progress",function(t){e.lastSize=t.loaded},!1)}),f.on("open-xhr-start",function(t){this.params={method:t[0]},i(this,t[1]),this.metrics={}}),f.on("open-xhr-end",function(t,e){"loader_config"in NREUM&&"xpid"in NREUM.loader_config&&this.sameOrigin&&e.setRequestHeader("X-NewRelic-ID",NREUM.loader_config.xpid)}),f.on("send-xhr-start",function(t,e){var n=this.metrics,r=t[0],o=this;if(n&&r){var i=h(r);i&&(n.txSize=i)}this.startTime=(new Date).getTime(),this.listener=function(t){try{"abort"===t.type&&(o.params.aborted=!0),("load"!==t.type||o.called===o.totalCbs&&(o.onloadCalled||"function"!=typeof e.onload))&&o.end(e)}catch(n){try{f.emit("internal-error",[n])}catch(r){}}};for(var a=0;a<d;a++)e.addEventListener(u[a],this.listener,!1)}),f.on("xhr-cb-time",function(t,e,n){this.cbTime+=t,e?this.onloadCalled=!0:this.called+=1,this.called!==this.totalCbs||!this.onloadCalled&&"function"==typeof n.onload||this.end(n)}),f.on("xhr-load-added",function(t,e){var n=""+l(t)+!!e;this.xhrGuids&&!this.xhrGuids[n]&&(this.xhrGuids[n]=!0,this.totalCbs+=1)}),f.on("xhr-load-removed",function(t,e){var n=""+l(t)+!!e;this.xhrGuids&&this.xhrGuids[n]&&(delete this.xhrGuids[n],this.totalCbs-=1)}),f.on("addEventListener-end",function(t,e){e instanceof m&&"load"===t[0]&&f.emit("xhr-load-added",[t[1],t[2]],e)}),f.on("removeEventListener-end",function(t,e){e instanceof m&&"load"===t[0]&&f.emit("xhr-load-removed",[t[1],t[2]],e)}),f.on("fn-start",function(t,e,n){e instanceof m&&("onload"===n&&(this.onload=!0),("load"===(t[0]&&t[0].type)||this.onload)&&(this.xhrCbStart=(new Date).getTime()))}),f.on("fn-end",function(t,e){this.xhrCbStart&&f.emit("xhr-cb-time",[(new Date).getTime()-this.xhrCbStart,this.onload,e],e)})}},{}],11:[function(t,e,n){e.exports=function(t){var e=document.createElement("a"),n=window.location,r={};e.href=t,r.port=e.port;var o=e.href.split("://");!r.port&&o[1]&&(r.port=o[1].split("/")[0].split("@").pop().split(":")[1]),r.port&&"0"!==r.port||(r.port="https"===o[0]?"443":"80"),r.hostname=e.hostname||n.hostname,r.pathname=e.pathname,r.protocol=o[0],"/"!==r.pathname.charAt(0)&&(r.pathname="/"+r.pathname);var i=!e.protocol||":"===e.protocol||e.protocol===n.protocol,a=e.hostname===document.domain&&e.port===n.port;return r.sameOrigin=i&&(!e.hostname||a),r}},{}],12:[function(t,e,n){function r(){}function o(t,e,n){return function(){return i(t,[(new Date).getTime()].concat(c(arguments)),e?null:this,n),e?void 0:this}}var i=t("handle"),a=t(15),c=t(16),s=t("ee").get("tracer"),f=NREUM;"undefined"==typeof window.newrelic&&(newrelic=f);var u=["setPageViewName","setCustomAttribute","setErrorHandler","finished","addToTrace","inlineHit","addRelease"],d="api-",l=d+"ixn-";a(u,function(t,e){f[e]=o(d+e,!0,"api")}),f.addPageAction=o(d+"addPageAction",!0),f.setCurrentRouteName=o(d+"routeName",!0),e.exports=newrelic,f.interaction=function(){return(new r).get()};var p=r.prototype={createTracer:function(t,e){var n={},r=this,o="function"==typeof e;return i(l+"tracer",[Date.now(),t,n],r),function(){if(s.emit((o?"":"no-")+"fn-start",[Date.now(),r,o],n),o)try{return e.apply(this,arguments)}finally{s.emit("fn-end",[Date.now()],n)}}}};a("setName,setAttribute,save,ignore,onEnd,getContext,end,get".split(","),function(t,e){p[e]=o(l+e)}),newrelic.noticeError=function(t){"string"==typeof t&&(t=new Error(t)),i("err",[t,(new Date).getTime()])}},{}],13:[function(t,e,n){e.exports=function(t){if("string"==typeof t&&t.length)return t.length;if("object"==typeof t){if("undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer&&t.byteLength)return t.byteLength;if("undefined"!=typeof Blob&&t instanceof Blob&&t.size)return t.size;if(!("undefined"!=typeof FormData&&t instanceof FormData))try{return JSON.stringify(t).length}catch(e){return}}}},{}],14:[function(t,e,n){var r=0,o=navigator.userAgent.match(/Firefox[\/\s](\d+\.\d+)/);o&&(r=+o[1]),e.exports=r},{}],15:[function(t,e,n){function r(t,e){var n=[],r="",i=0;for(r in t)o.call(t,r)&&(n[i]=e(r,t[r]),i+=1);return n}var o=Object.prototype.hasOwnProperty;e.exports=r},{}],16:[function(t,e,n){function r(t,e,n){e||(e=0),"undefined"==typeof n&&(n=t?t.length:0);for(var r=-1,o=n-e||0,i=Array(o<0?0:o);++r<o;)i[r]=t[e+r];return i}e.exports=r},{}],17:[function(t,e,n){function r(t){return!(t&&t instanceof Function&&t.apply&&!t[a])}var o=t("ee"),i=t(16),a="nr@original",c=Object.prototype.hasOwnProperty,s=!1;e.exports=function(t,e){function n(t,e,n,o){function nrWrapper(){var r,a,c,s;try{a=this,r=i(arguments),c="function"==typeof n?n(r,a):n||{}}catch(f){l([f,"",[r,a,o],c])}u(e+"start",[r,a,o],c);try{return s=t.apply(a,r)}catch(d){throw u(e+"err",[r,a,d],c),d}finally{u(e+"end",[r,a,s],c)}}return r(t)?t:(e||(e=""),nrWrapper[a]=t,d(t,nrWrapper),nrWrapper)}function f(t,e,o,i){o||(o="");var a,c,s,f="-"===o.charAt(0);for(s=0;s<e.length;s++)c=e[s],a=t[c],r(a)||(t[c]=n(a,f?c+o:o,i,c))}function u(n,r,o){if(!s||e){var i=s;s=!0;try{t.emit(n,r,o)}catch(a){l([a,n,r,o])}s=i}}function d(t,e){if(Object.defineProperty&&Object.keys)try{var n=Object.keys(t);return n.forEach(function(n){Object.defineProperty(e,n,{get:function(){return t[n]},set:function(e){return t[n]=e,e}})}),e}catch(r){l([r])}for(var o in t)c.call(t,o)&&(e[o]=t[o]);return e}function l(e){try{t.emit("internal-error",e)}catch(n){}}return t||(t=o),n.inPlace=f,n.flag=a,n}},{}],ee:[function(t,e,n){function r(){}function o(t){function e(t){return t&&t instanceof r?t:t?s(t,c,i):i()}function n(n,r,o){if(!l.aborted){t&&t(n,r,o);for(var i=e(o),a=h(n),c=a.length,s=0;s<c;s++)a[s].apply(i,r);var f=u[y[n]];return f&&f.push([g,n,r,i]),i}}function p(t,e){v[t]=h(t).concat(e)}function h(t){return v[t]||[]}function m(t){return d[t]=d[t]||o(n)}function w(t,e){f(t,function(t,n){e=e||"feature",y[n]=e,e in u||(u[e]=[])})}var v={},y={},g={on:p,emit:n,get:m,listeners:h,context:e,buffer:w,abort:a,aborted:!1};return g}function i(){return new r}function a(){(u.api||u.feature)&&(l.aborted=!0,u=l.backlog={})}var c="nr@context",s=t("gos"),f=t(15),u={},d={},l=e.exports=o();l.backlog=u},{}],gos:[function(t,e,n){function r(t,e,n){if(o.call(t,e))return t[e];var r=n();if(Object.defineProperty&&Object.keys)try{return Object.defineProperty(t,e,{value:r,writable:!0,enumerable:!1}),r}catch(i){}return t[e]=r,r}var o=Object.prototype.hasOwnProperty;e.exports=r},{}],handle:[function(t,e,n){function r(t,e,n,r){o.buffer([t],r),o.emit(t,e,n)}var o=t("ee").get("handle");e.exports=r,r.ee=o},{}],id:[function(t,e,n){function r(t){var e=typeof t;return!t||"object"!==e&&"function"!==e?-1:t===window?0:a(t,i,function(){return o++})}var o=1,i="nr@id",a=t("gos");e.exports=r},{}],loader:[function(t,e,n){function r(){if(!b++){var t=g.info=NREUM.info,e=d.getElementsByTagName("script")[0];if(setTimeout(f.abort,3e4),!(t&&t.licenseKey&&t.applicationID&&e))return f.abort();s(v,function(e,n){t[e]||(t[e]=n)}),c("mark",["onload",a()],null,"api");var n=d.createElement("script");n.src="https://"+t.agent,e.parentNode.insertBefore(n,e)}}function o(){"complete"===d.readyState&&i()}function i(){c("mark",["domContent",a()],null,"api")}function a(){return(new Date).getTime()}var c=t("handle"),s=t(15),f=t("ee"),u=window,d=u.document,l="addEventListener",p="attachEvent",h=u.XMLHttpRequest,m=h&&h.prototype;NREUM.o={ST:setTimeout,CT:clearTimeout,XHR:h,REQ:u.Request,EV:u.Event,PR:u.Promise,MO:u.MutationObserver},t(12);var w=""+location,v={beacon:"bam.nr-data.net",errorBeacon:"bam.nr-data.net",agent:"js-agent.newrelic.com/nr-1016.min.js"},y=h&&m&&m[l]&&!/CriOS/.test(navigator.userAgent),g=e.exports={offset:a(),origin:w,features:{},xhrWrappable:y};d[l]?(d[l]("DOMContentLoaded",i,!1),u[l]("load",r,!1)):(d[p]("onreadystatechange",o),u[p]("onload",r)),c("mark",["firstbyte",a()],null,"api");var b=0},{}]},{},["loader",2,10,4,3]);
;NREUM.info={beacon:"bam.nr-data.net",errorBeacon:"bam.nr-data.net",licenseKey:"13e44ec848",applicationID:"46444088",sa:1}
</script>


  <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "Organization",
      "name": "KongHQ",
      "url": "https://docs.konghq.com",
      "logo": "https://docs.konghq.com/assets/images/logo.png",
      "sameAs": [
        "https://www.facebook.com/konginc",
        "https://twitter.com/thekonginc",
        "https://plus.google.com/+mashape"
      ]
    }
  </script>

  <!-- Preload assets -->
  <link rel="dns-prefetch" href="//cloud.typography.com">
  <link rel="dns-prefetch" href="//dev.visualwebsiteoptimizer.com">
  <link rel="dns-prefetch" href="//cdn.segment.com">
  <!-- ##gulp-resource-hints## -->

  <link rel="icon" type="image/x-icon" href="/assets/images/favicon.ico"/>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />
  <link rel="stylesheet" href="/assets/styles.css?v=1534747998"/>
</head>

<!-- Kong Cookie Policy -->
<div class="cookie-policy-container">
  <p>In order to give you better service we use cookies. By continuing to use our website, you agree to the use of cookies as described in our <a href=" https://konghq.com/cookie-policy/">Cookie Policy</a>
  <button class="cookie-policy-accept btn button" type="submit">I Agree</button>
</div>



  <body id="page-plugin" >
    <header class="site-header">
  <div class="enterprise">

    <!-- Kong Summit Announcement Banner -->
    <div class="summit-banner bg-summit">
  <a href="https://konghq.com/kong-summit">
    <div class="bg-summit-mask">
      <img class="glow" src="/assets/images/kong-summit/glow.svg" alt="kong-summit-glow" />
    </div>
    <div class="container">
      <div class="row">
        <div class="text-center">
          <p>Kong Summit is coming to SF Sept 18-19! <span class="hide_mobile">Join the Microservices and API Revolution Today!</span>
          <a href="https://konghq.com/kong-summit" class="header_link" alt="Get Your Tickets">REGISTER</a></p>
        </div>
      </div>
    </div>
  </a>
</div>


    <div class="container">
      <nav class="enterprise-sites one-half column">
        <ul>
          <li>
            <a href="https://konghq.com/kong-enterprise-edition">Enterprise</a>
          </li>
          <li>
            <a href="https://konghq.com/kong-community-edition">Kong API Gateway</a>
          </li>
        </ul>
      </nav>
      <nav class="enterprise-contact one-half column">
        <ul>
          <li>
            <a href="https://support.konghq.com/">Support</a>
          </li>
          <li>
            <a href="https://konghq.com/request-demo">Request Demo</a>
          </li>
        </ul>
      </nav>
    </div>
  </div>
  <!-- .enterprise -->
  <div class="navbar">
    <div class="container">
      <a href="https://konghq.com" class="navbar-brand">
        <img src="/assets/images/Kogo.svg" alt="Kong">
      </a>
      <iframe class="header-star" src="https://ghbtns.com/github-btn.html?user=Kong&amp;repo=kong&amp;type=star" frameborder="0"
        scrolling="0" width="55" height="20"></iframe>
      <button data-toggle="collapse" data-target="#navbar" aria-expanded="true" aria-controls="navbar" class="navbar-toggle">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <nav id="navbar" class="navbar-nav">
        <ul>
          <li>
            <a href="/" class="active">Docs</a>
          </li>
          <li>
            <a href="https://konghq.com/about-kong-inc/">About</a>
          </li>
          <li>
            <a href="https://konghq.com/plugins">Plugins</a>
          </li>
          <li>
            <a href="https://konghq.com/community-resources/">Community</a>
          </li>
          <li>
            <a href="https://konghq.com/kong-enterprise-edition/">Enterprise</a>
          </li>
          <li>
            <a href="https://github.com/Kong/kong" target="_blank">GitHub</a>
          </li>
          <li class="hidden-lg">
            <a href="https://support.konghq.com/">Support</a>
          </li>
          <li>
            <a href="https://konghq.com/install" class="button button-dark" data-analytics='{"event": "Clicked download", "type": "button", "location": "header"}'>Installation</a>
          </li>
        </ul>
      </nav>
    </div>
  </div>
  <!-- .navbar -->
</header>


    













<div class="page page-plugin">
  
  <header class="page-header">
    <div class="container">
      
        <div class="page-header-icon">
          <img src="/assets/images/icons/plugins/oauth2-authentication.png" alt="" />
        </div>
      

      <div class="page-header-title">
        
          <ul class="breadcrumbs">
            
              <li class="breadcrumb-item">
                
                <a href="https://konghq.com/plugins">Plugins</a>
                
              </li>
            
          </ul>
        

        <h1>OAuth 2.0 Authentication</h1>

        
      </div>

      

      
    </div>
  </header>



  <div class="container">
    <aside class="page-navigation">

      <nav>
        <h5>Getting Started</h5>
        <ul>
          <li><a href="#terminology">Terminology</a></li>
          
          <li><a href="#configuration">Configuration</a></li>
        </ul>
      </nav>

      
        <nav>
          
            <h5>Usage</h5>
          

          <ul>
            
              <li>
                <a href="#endpoints">Endpoints</a>

                
              </li>
            
              <li>
                <a href="#create-a-consumer">Create a Consumer</a>

                
              </li>
            
              <li>
                <a href="#create-an-application">Create an Application</a>

                
              </li>
            
              <li>
                <a href="#migrating-access-tokens">Migrating Access Tokens</a>

                
              </li>
            
              <li>
                <a href="#upstream-headers">Upstream Headers</a>

                
              </li>
            
          </ul>
        </nav>
      
        <nav>
          
            <h5>oAuth 2.0 Flows</h5>
          

          <ul>
            
              <li>
                <a href="#client-credentials">Client Credentials</a>

                
              </li>
            
              <li>
                <a href="#authorization-code">Authorization Code</a>

                
              </li>
            
              <li>
                <a href="#resource-owner-password-credentials">Resource Owner Password Credentials</a>

                
              </li>
            
          </ul>
        </nav>
      
    </aside>

    <div class="page-content-container">
      <div class="page-content">
        <div class="content">

          <p>Add an OAuth 2.0 authentication layer with the <a href="https://tools.ietf.org/html/rfc6749#section-4.1">Authorization Code Grant</a>, <a href="https://tools.ietf.org/html/rfc6749#section-4.4">Client Credentials</a>,
<a href="https://tools.ietf.org/html/rfc6749#section-4.2">Implicit Grant</a> or <a href="https://tools.ietf.org/html/rfc6749#section-4.3">Resource Owner Password Credentials Grant</a> flow.</p>

<hr>

<div class="alert alert-warning">
  <strong>Note:</strong> As per the OAuth2 specs, this plugin requires the
  underlying service to be served over HTTPS. To avoid any
  confusion, we recommend that you configure the Route used to serve the
  underlying Service to only accept HTTPS traffic (via its `protocols`
  property).
</div>


          <hr>

          <h2 id="terminology">Terminology</h2>
          <ul>
            <li><code>plugin</code>: a plugin executing actions inside Kong before or after a request has been proxied to the upstream API.</li>

            
              <li><code>Service</code>: the Kong entity representing an external <em>upstream</em> API or microservice.</li>
            
            
            
              <li><code>upstream service</code>: this refers to your own API/service sitting behind Kong, to which client requests are forwarded.</li>
            
            <li><code>API</code>: a legacy entity used to represent your upstream services. <strong>Deprecated</strong> in favor of Services since 0.13.0.</li>
            

          </ul>

          <hr>

          

          <h2 id="configuration">Configuration</h2>
          
            <h4 id="enabling-the-plugin-on-a-service">Enabling the plugin on a Service</h4>

<p>Configure this plugin on a <a href="/latest/admin-api/#service-object">Service</a> by
making the following request:</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="gp">$ </span>curl -X POST http://kong:8001/services/<span class="o">{</span>service<span class="o">}</span>/plugins <span class="se">\</span>
    --data <span class="s2">"name=oauth2"</span>  <span class="se">\</span>
    --data <span class="s2">"config.scopes=email,phone,address"</span> <span class="se">\</span>
    --data <span class="s2">"config.mandatory_scope=true"</span> <span class="se">\</span>
    --data <span class="s2">"config.enable_authorization_code=true"</span>
</code></pre></div>
<ul>
<li><code>service</code>: the id or name of the Service that this plugin configuration will
target.</li>
</ul>

          
          
          
          
            <h4 id="enabling-the-plugin-on-an-api">Enabling the plugin on an API</h4>

<p>If you are using an older version of Kong with the legacy <a href="/0.13.x/admin-api/#api-object">API
entity</a> (<strong>deprecated</strong> since 0.13.0), you
can configure this plugin on top of such an API by making the following
request:</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="gp">$ </span>curl -X POST http://kong:8001/apis/<span class="o">{</span>api<span class="o">}</span>/plugins <span class="se">\</span>
    --data <span class="s2">"name=oauth2"</span>  <span class="se">\</span>
    --data <span class="s2">"config.scopes=email,phone,address"</span> <span class="se">\</span>
    --data <span class="s2">"config.mandatory_scope=true"</span> <span class="se">\</span>
    --data <span class="s2">"config.enable_authorization_code=true"</span>
</code></pre></div>
<ul>
<li><code>api</code>: either id or name of the API that this plugin configuration will
target.</li>
</ul>

          

          <h4>Global plugins</h4>

          <p>All plugins can be configured using the <code>http://kong:8001/plugins/</code> endpoint. A plugin which is not associated to any Service,
            Route or Consumer (or API, if you are using an older version of Kong) is considered "global", and will be run on every request.
            Read the <a href="/latest/admin-api/#add-plugin">Plugin Reference</a> and the
            <a href="/latest/admin-api/#precedence">Plugin Precedence</a> sections for more information.
          </p>

          <h4>Parameters</h4>

          <p>Here's a list of all the parameters which can be used in this plugin's configuration: </p>

          <table>
  <thead>
    <tr><th>form parameter</th><th>default</th><th>description</th></tr>
  </thead>
  <tbody>
    <tr><td><code>name</code></td><td></td><td>The name of the plugin to use, in this case <code>oauth2</code></td></tr>

    
      <tr><td><code>service_id</code></td><td></td><td>The id of the Service which this plugin will target.</td></tr>
    
    
      <tr><td><code>enabled</code></td><td><code>true</code></td><td>Whether this plugin will be applied.</td></tr>
    
    
    <tr><td><code>api_id</code></td><td></td><td>The id of the API which this plugin will target. <strong>Note:</strong> The <a href="/0.13.x/admin-api/#api-object">API Entity</a> is deprecated since Kong 0.13.0.</td></tr>
    
    
      <tr>
        <td><code>config.scopes</code>
          
          
        </td>
        <td></td>
        <td><p>Describes an array of comma separated scope names that will be available to the end user</p>
</td>
      </td>
    
      <tr>
        <td><code>config.mandatory_scope</code>
          <br><em>optional</em>
          
        </td>
        <td><p><code>false</code></p>
</td>
        <td><p>An optional boolean value telling the plugin to require at least one scope to be authorized by the end user</p>
</td>
      </td>
    
      <tr>
        <td><code>config.token_expiration</code>
          <br><em>optional</em>
          
        </td>
        <td><p><code>7200</code></p>
</td>
        <td><p>An optional integer value telling the plugin how many seconds a token should last, after which the client will need to refresh the token. Set to <code>0</code> to disable the expiration.</p>
</td>
      </td>
    
      <tr>
        <td><code>config.enable_authorization_code</code>
          <br><em>optional</em>
          
        </td>
        <td><p><code>false</code></p>
</td>
        <td><p>An optional boolean value to enable the three-legged Authorization Code flow (<a href="https://tools.ietf.org/html/rfc6749#section-4.1">RFC 6742 Section 4.1</a>)</p>
</td>
      </td>
    
      <tr>
        <td><code>config.enable_client_credentials</code>
          <br><em>optional</em>
          
        </td>
        <td><p><code>false</code></p>
</td>
        <td><p>An optional boolean value to enable the Client Credentials Grant flow (<a href="https://tools.ietf.org/html/rfc6749#section-4.4">RFC 6742 Section 4.4</a>)</p>
</td>
      </td>
    
      <tr>
        <td><code>config.enable_implicit_grant</code>
          <br><em>optional</em>
          
        </td>
        <td><p><code>false</code></p>
</td>
        <td><p>An optional boolean value to enable the Implicit Grant flow which allows to provision a token as a result of the authorization process (<a href="https://tools.ietf.org/html/rfc6749#section-4.2">RFC 6742 Section 4.2</a>)</p>
</td>
      </td>
    
      <tr>
        <td><code>config.enable_password_grant</code>
          <br><em>optional</em>
          
        </td>
        <td><p><code>false</code></p>
</td>
        <td><p>An optional boolean value to enable the Resource Owner Password Credentials Grant flow (<a href="https://tools.ietf.org/html/rfc6749#section-4.3">RFC 6742 Section 4.3</a>)</p>
</td>
      </td>
    
      <tr>
        <td><code>config.auth_header_name</code>
          <br><em>optional</em>
          
        </td>
        <td><p><code>authorization</code></p>
</td>
        <td><p>The name of the header supposed to carry the access token. Default: <code>authorization</code>.</p>
</td>
      </td>
    
      <tr>
        <td><code>config.hide_credentials</code>
          <br><em>optional</em>
          
        </td>
        <td><p><code>false</code></p>
</td>
        <td><p>An optional boolean value telling the plugin to show or hide the credential from the upstream service. If <code>true</code>, the plugin will strip the credential from the request (i.e. the header containing the client crentials) before proxying it.</p>
</td>
      </td>
    
      <tr>
        <td><code>config.accept_http_if_already_terminated</code>
          <br><em>optional</em>
          
        </td>
        <td><p><code>false</code></p>
</td>
        <td><p>Accepts HTTPs requests that have already been terminated by a proxy or load balancer and the <code>x-forwarded-proto: https</code> header has been added to the request. Only enable this option if the Kong server cannot be publicly accessed and the only entry-point is such proxy or load balancer.</p>
</td>
      </td>
    
      <tr>
        <td><code>config.anonymous</code>
          <br><em>optional</em>
          
        </td>
        <td></td>
        <td><p>An optional string (consumer uuid) value to use as an &quot;anonymous&quot; consumer if authentication fails. If empty (default), the request will fail with an authentication failure <code>4xx</code>. Please note that this value must refer to the Consumer <code>id</code> attribute which is internal to Kong, and <strong>not</strong> its <code>custom_id</code>.</p>
</td>
      </td>
    
      <tr>
        <td><code>config.global_credentials</code>
          <br><em>optional</em>
          
        </td>
        <td><p><code>false</code></p>
</td>
        <td><p>An optional boolean value that allows to use the same OAuth credentials generated by the plugin with any other Service (or API) whose OAuth 2.0 plugin configuration also has <code>config.global_credentials=true</code>.</p>
</td>
      </td>
    
      <tr>
        <td><code>config.refresh_token_ttl</code>
          <br><em>optional</em>
          
        </td>
        <td><p><code>1209600</code></p>
</td>
        <td><p>An optional integer value telling the plugin how many seconds a token/refresh token pair is valid for, and can be used to generate a new access token. Default value is 2 weeks. Set to <code>0</code> to keep the token/refresh token pair indefinitely valid.</p>
</td>
      </td>
    
  </tbody>
</table>


          <div class="alert alert-warning">
    <center>The option <code>config.refresh_token_ttl</code> is only available from version 0.12.0 and later</center>
</div>

<p>Once applied, any user with a valid credential can access the Service/API.
To restrict usage to only some of the authenticated users, also add the
<a href="/plugins/acl/">ACL</a> plugin (not covered here) and create whitelist or
blacklist groups of users.</p>


          <h2 id="usage">Usage</h2>

<p>In order to use the plugin, you first need to create a consumer to associate one or more credentials to. The Consumer represents a developer using the upstream service.</p>

<h3 id="endpoints">Endpoints</h3>

<p>By default the OAuth 2.0 plugin listens on the following endpoints when a client consumes the underlying Service (or API) via the <a href="https://docs.konghq.com/latest/configuration/#proxy_listen">proxy port</a>:</p>

<table><thead>
<tr>
<th>Endpoint</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td><code>/oauth2/authorize</code></td>
<td>The endpoint to the Authorization Server that provisions authorization codes for the <a href="https://tools.ietf.org/html/rfc6749#section-4.1">Authorization Code</a> flow, or the access token when the <a href="https://tools.ietf.org/html/rfc6749#section-4.2">Implicit Grant</a> flow is enabled. Only <code>POST</code> is supported.</td>
</tr>
<tr>
<td><code>/oauth2/token</code></td>
<td>The endpoint to the Authorization Server that provision access tokens. This is also the only endpoint to use for the <a href="https://tools.ietf.org/html/rfc6749#section-4.4">Client Credentials</a> and <a href="https://tools.ietf.org/html/rfc6749#section-4.3">Resource Owner Password Credentials Grant</a> flows. Only <code>POST</code> is supported.</td>
</tr>
</tbody></table>

<p>The clients trying to authorize and request access tokens must use these endpoints. Remember that the endpoints above must be combined with the right URI path or headers that you normally use to match a configured Route through Kong.</p>

<h3 id="create-a-consumer">Create a Consumer</h3>

<p>You need to associate a credential to an existing <a href="/latest/admin-api/#consumer-object">Consumer</a> object. To create a Consumer, you can execute the following request:</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="gp">$ </span>curl -X POST http://kong:8001/consumers/ <span class="se">\</span>
    --data <span class="s2">"username=user123"</span> <span class="se">\</span>
    --data <span class="s2">"custom_id=SOME_CUSTOM_ID"</span>
</code></pre></div>
<table><thead>
<tr>
<th>parameter</th>
<th>default</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td><code>username</code><br><em>semi-optional</em></td>
<td></td>
<td>The username of the consumer. Either this field or <code>custom_id</code> must be specified.</td>
</tr>
<tr>
<td><code>custom_id</code><br><em>semi-optional</em></td>
<td></td>
<td>A custom identifier used to map the consumer to another database. Either this field or <code>username</code> must be specified.</td>
</tr>
</tbody></table>

<p>A <a href="/latest/admin-api/#consumer-object">Consumer</a> can have many credentials.</p>

<h3 id="create-an-application">Create an Application</h3>

<p>Then you can finally provision new OAuth 2.0 credentials (also called &quot;OAuth applications&quot;) by making the following HTTP request:</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="gp">$ </span>curl -X POST http://kong:8001/consumers/<span class="o">{</span>consumer_id<span class="o">}</span>/oauth2 <span class="se">\</span>
    --data <span class="s2">"name=Test%20Application"</span> <span class="se">\</span>
    --data <span class="s2">"client_id=SOME-CLIENT-ID"</span> <span class="se">\</span>
    --data <span class="s2">"client_secret=SOME-CLIENT-SECRET"</span> <span class="se">\</span>
    --data <span class="s2">"redirect_uri=http://some-domain/endpoint/"</span>
</code></pre></div>
<p><code>consumer_id</code>: The <a href="/latest/admin-api/#consumer-object">Consumer</a> entity to associate the credentials to</p>

<table><thead>
<tr>
<th>form parameter</th>
<th>default</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td><code>name</code></td>
<td></td>
<td>The name to associate to the credential. In OAuth 2.0 this would be the application name.</td>
</tr>
<tr>
<td><code>client_id</code><br><em>optional</em></td>
<td></td>
<td>You can optionally set your own unique <code>client_id</code>. If missing, the plugin will generate one.</td>
</tr>
<tr>
<td><code>client_secret</code><br><em>optional</em></td>
<td></td>
<td>You can optionally set your own unique <code>client_secret</code>. If missing, the plugin will generate one.</td>
</tr>
<tr>
<td><code>redirect_uri</code></td>
<td></td>
<td>The URL in your app where users will be sent after authorization (<a href="https://tools.ietf.org/html/rfc6749#section-3.1.2">RFC 6742 Section 3.1.2</a>)</td>
</tr>
</tbody></table>

<h2 id="migrating-access-tokens">Migrating Access Tokens</h2>

<p>If you are migrating your existing OAuth 2.0 applications and access tokens over to Kong, then you can:</p>

<ul>
<li>Migrate consumers and applications by creating OAuth 2.0 applications as explained above.</li>
<li>Migrate access tokens using the <code>/oauth2_tokens</code> endpoints in the Kong&#39;s Admin API. For example:</li>
</ul>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="gp">$ </span>curl -X POST http://kong:8001/oauth2_tokens <span class="se">\</span>
    --data <span class="s2">"credential_id=KONG-APPLICATION-ID"</span> <span class="se">\</span>
    --data <span class="s2">"token_type=bearer"</span> <span class="se">\</span>
    --data <span class="s2">"access_token=SOME-TOKEN"</span> <span class="se">\</span>
    --data <span class="s2">"refresh_token=SOME-TOKEN"</span> <span class="se">\</span>
    --data <span class="s2">"expires_in=3600"</span>
</code></pre></div>
<table><thead>
<tr>
<th>form parameter</th>
<th>default</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td><code>credential_id</code></td>
<td></td>
<td>The ID of the OAuth 2.0 application created on Kong.</td>
</tr>
<tr>
<td><code>token_type</code><br><em>optional</em></td>
<td><code>bearer</code></td>
<td>The <a href="https://tools.ietf.org/html/rfc6749#section-7.1">token type</a>.</td>
</tr>
<tr>
<td><code>access_token</code><br><em>optional</em></td>
<td></td>
<td>You can optionally set your own access token value, otherwise a random string will be generated.</td>
</tr>
<tr>
<td><code>refresh_token</code><br><em>optional</em></td>
<td></td>
<td>You can optionally set your own unique refresh token value, otherwise a random string will be generated.</td>
</tr>
<tr>
<td><code>expires_in</code></td>
<td></td>
<td>The expiration time (in seconds) of the access token.</td>
</tr>
<tr>
<td><code>scope</code><br><em>optional</em></td>
<td></td>
<td>The authorized scope associated with the token.</td>
</tr>
<tr>
<td><code>authenticated_userid</code><br><em>optional</em></td>
<td></td>
<td>The custom ID of the user who authorized the application.</td>
</tr>
</tbody></table>

<h2 id="upstream-headers">Upstream Headers</h2>

<p>When a client has been authenticated and authorized, the plugin will append some headers to the request before proxying it to the upstream service, so that you can identify the consumer and the end-user in your code:</p>

<ul>
<li><code>X-Consumer-ID</code>, the ID of the Consumer on Kong</li>
<li><code>X-Consumer-Custom-ID</code>, the <code>custom_id</code> of the Consumer (if set)</li>
<li><code>X-Consumer-Username</code>, the <code>username</code> of the Consumer (if set)</li>
<li><code>X-Authenticated-Scope</code>, the comma-separated list of scopes that the end user has authenticated, if available (only if the consumer is not the &#39;anonymous&#39; consumer)</li>
<li><code>X-Authenticated-Userid</code>, the logged-in user ID who has granted permission to the client (only if the consumer is not the &#39;anonymous&#39; consumer)</li>
<li><code>X-Anonymous-Consumer</code>, will be set to <code>true</code> when authentication failed, and the &#39;anonymous&#39; consumer was set instead.</li>
</ul>

<p>You can use this information on your side to implement additional logic. You can use the <code>X-Consumer-ID</code> value to query the Kong Admin API and retrieve more information about the Consumer.</p>

<hr>

<h2 id="oauth-2-0-flows">OAuth 2.0 Flows</h2>

<h2 id="client-credentials">Client Credentials</h2>

<p>The <a href="https://tools.ietf.org/html/rfc6749#section-4.4">Client Credentials</a> flow will work out of the box, without building any authorization page. The clients will need to use the <code>/oauth2/token</code> endpoint to request an access token.</p>

<h3 id="authorization-code">Authorization Code</h3>

<p>After provisioning Consumers and associating OAuth 2.0 credentials to them, it is important to understand how the OAuth 2.0 authorization flow works. As opposed to most of the Kong plugins, the OAuth 2.0 plugin requires some little additional work on your side to make everything work well:</p>

<ul>
<li>You <strong>must</strong> implement an authorization page on your web application, that will talk with the plugin server-side.</li>
<li><em>Optionally</em> you need to explain on your website/documentation how to consume your OAuth 2.0 protected services, so that developers accessing your service know how to build their client implementations</li>
</ul>

<h4 id="the-flow-explained">The flow explained</h4>

<p>Building the authorization page is going to be the primary task that the plugin itself cannot do out of the box, because it requires to check that the user is properly logged in, and this operation is strongly tied with your authentication implementation.</p>

<p>The authorization page is made of two parts:</p>

<ul>
<li>The frontend page that the user will see, and that will allow him to authorize the client application to access his data</li>
<li>The backend that will process the HTML form displayed in the frontend, that will talk with the OAuth 2.0 plugin on Kong, and that will ultimately redirect the user to a third party URL.</li>
</ul>

<div class="alert alert-warning">
  <div class="container" style="text-align: center;">
    <a href="https://github.com/Kong/kong-oauth2-hello-world">You can see a sample implementation in node.js + express.js on GitHub</a>
  </div>
</div>

<p>A diagram representing this flow:</p>

<div class="alert alert-info">
  <a title="OAuth 2.0 Flow" href="/assets/images/docs/oauth2/oauth2-flow.png" target="_blank"><img src="/assets/images/docs/oauth2/oauth2-flow.png"/></a>
</div>

<ol>
<li><p>The client application will redirect the end user to the authorization page on your web application, passing <code>client_id</code>, <code>response_type</code> and <code>scope</code> (if required) as querystring parameters. This is a sample authorization page:
<div class="alert alert-info">
  <center><img title="OAuth 2.0 Prompt" src="/assets/images/docs/oauth2/oauth2-prompt.png"/></center>
</div></p></li>
<li><p>Before showing the actual authorization page, the web application will make sure that the user is logged in.</p></li>
<li><p>The client application will send the <code>client_id</code> in the querystring, from which the web application can retrieve both the OAuth 2.0 application name, and developer name, by making the following request to Kong:</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="gp">$ </span>curl kong:8001/oauth2?client_id<span class="o">=</span>XXX
</code></pre></div></li>
<li><p>If the end user authorized the application, the form will submit the data to your backend with a <code>POST</code> request, sending the <code>client_id</code>, <code>response_type</code> and <code>scope</code> parameters that were placed in <code>&lt;input type=&quot;hidden&quot; .. /&gt;</code> fields.</p></li>
<li><p>The backend must add the <code>provision_key</code> and <code>authenticated_userid</code> parameters to the <code>client_id</code>, <code>response_type</code> and <code>scope</code> parameters and it will make a <code>POST</code> request to Kong at your API address, on the <code>/oauth2/authorize</code> endpoint. If an <code>Authorization</code> header has been sent by the client, that must be added too. The equivalent of:</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="gp">$ </span>curl https://your.api.com/oauth2/authorize <span class="se">\</span>
    --header <span class="s2">"Authorization: Basic czZCaGRSa3F0MzpnWDFmQmF0M2JW"</span> <span class="se">\</span>
    --data <span class="s2">"client_id=XXX"</span> <span class="se">\</span>
    --data <span class="s2">"response_type=XXX"</span> <span class="se">\</span>
    --data <span class="s2">"scope=XXX"</span> <span class="se">\</span>
    --data <span class="s2">"provision_key=XXX"</span> <span class="se">\</span>
    --data <span class="s2">"authenticated_userid=XXX"</span>
</code></pre></div>
<p>The <code>provision_key</code> is the key the plugin has generated when it has been added to the Service (or API) while <code>authenticated_userid</code> is the ID of the logged-in end user who has granted the permission.</p></li>
<li><p>Kong will respond with a JSON response:</p>
<div class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
  </span><span class="nt">"redirect_uri"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://some/url"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>With either a <code>200 OK</code> or <code>400 Bad Request</code> response code depending if the request was successful or not.</p></li>
<li><p>In <strong>both</strong> cases, ignore the response status code and just redirect the user to whatever URI is being returned in the <code>redirect_uri</code> property.</p></li>
<li><p>The client appication will take it from here, and will continue the flow with Kong with no other interaction with your web application. Like exchaging the authorization code for an access token if it&#39;s an Authorization Code Grant flow.</p></li>
<li><p>Once the Access Token has been retrieved, the client application will make requests on behalf of the user to your upstream service.</p></li>
<li><p>Access Tokens can expire, and when that happens the client application needs to renew the Access Token with Kong and retreive a new one.</p></li>
</ol>

<p>In this flow, the steps that you need to implement are:</p>

<ul>
<li>The login page, you probably already have it (step 2)</li>
<li>The Authorization page, with its backend that will simply collect the values, make a <code>POST</code> request to Kong and redirect the user to whatever URL Kong has returned (steps 3 to 7).</li>
</ul>

<hr>

<h2 id="resource-owner-password-credentials">Resource Owner Password Credentials</h2>

<p>The <a href="https://tools.ietf.org/html/rfc6749#section-4.3">Resource Owner Password Credentials Grant</a> is a much simpler version of the Authorization Code flow, but it still requires to build an authorization backend (without the frontend) in order to make it work properly.</p>

<p><img src="/assets/images/docs/oauth2/oauth2-flow2.png" alt="OAuth 2.0 Flow"></p>

<ol>
<li><p>On the first request, the client application make a request including some OAuth2 parameters, including <code>username</code> and <code>password</code> parameters, to your web-application.</p></li>
<li><p>The backend of your web-application will authenticate the <code>username</code> and <code>password</code> sent by the client, and if successful will add the <code>provision_key</code>, <code>authenticated_userid</code> and <code>grant_type</code> parameters to the parameters originally sent by the client, and it will make a <code>POST</code> request to Kong at, on the <code>/oauth2/token</code> endpoint of the configured plugin. If an <code>Authorization</code> header has been sent by the client, that must be added too. The equivalent of:</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="gp">$ </span>curl https://your.api.com/oauth2/token <span class="se">\</span>
    --header <span class="s2">"Authorization: Basic czZCaGRSa3F0MzpnWDFmQmF0M2JW"</span> <span class="se">\</span>
    --data <span class="s2">"client_id=XXX"</span> <span class="se">\</span>
    --data <span class="s2">"client_secret=XXX"</span> <span class="se">\</span>
    --data <span class="s2">"grant_type=password"</span> <span class="se">\</span>
    --data <span class="s2">"scope=XXX"</span> <span class="se">\</span>
    --data <span class="s2">"provision_key=XXX"</span> <span class="se">\</span>
    --data <span class="s2">"authenticated_userid=XXX"</span> <span class="se">\</span>
    --data <span class="s2">"username=XXX"</span> <span class="se">\</span>
    --data <span class="s2">"password=XXX"</span>
</code></pre></div>
<p>The <code>provision_key</code> is the key the plugin has generated when it has been added to the Service (or API), while <code>authenticated_userid</code> is the ID of the end user whose <code>username</code> and <code>password</code> belong to.</p></li>
<li><p>Kong will respond with a JSON response</p></li>
<li><p>The JSON response sent by Kong must be sent back to the original client as it is. If the operation is successful, this response will include an access token, otherwise it will include an error.</p></li>
</ol>

<p>In this flow, the steps that you need to implement are:</p>

<ul>
<li>The backend endpoint that will process the original request and will authenticate the <code>username</code> and <code>password</code> values sent by the client, and if the authentication is successful, make the request to Kong and return back to the client whatever response Kong has sent back.</li>
</ul>

<hr>

<h2 id="refresh-token">Refresh Token</h2>

<p>When your access token expires, you can generate a new access token using the refresh token you received in conjunction to your expired access token.</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="gp">$ </span>curl -X POST https://your.api.com/oauth2/token <span class="se">\</span>
    --data <span class="s2">"grant_type=refresh_token"</span> <span class="se">\</span>
    --data <span class="s2">"client_id=XXX"</span> <span class="se">\</span>
    --data <span class="s2">"client_secret=XXX"</span> <span class="se">\</span>
    --data <span class="s2">"refresh_token=XXX"</span>
</code></pre></div>
        </div>
      </div>
    </div>
  </div>
</div>


    
  <section class="section subscribe-section" id="newsletter">
  <div class="container">
    <header class="section-header">
      <h4>Keep up with the latest features</h4>
    </header>

    <div class="row">
      <div class="one-half column offset-by-three">
        <noscript>
          <iframe id="newsletter-iframe" src="https://go.pardot.com/l/392112/2017-08-16/b2qn8v" width="100%" height="100" type="text/html"
            frameborder="0" allowTransparency="true" style="border: 0"></iframe>
        </noscript>
        <script type="text/javascript">
          var form = 'https://go.pardot.com/l/392112/2017-08-16/b2qn8v';
          var params = window.location.search;
          var thisScript = document.scripts[document.scripts.length - 1];
          var iframe = document.createElement('iframe');

          iframe.setAttribute('src', form + params);
          iframe.setAttribute('width', '100%');
          iframe.setAttribute('height', 100);
          iframe.setAttribute('type', 'text/html');
          iframe.setAttribute('frameborder', 0);
          iframe.setAttribute('allowTransparency', 'true');
          iframe.setAttribute('id', 'newsletter-iframe');
          iframe.style.border = '0';

          thisScript.parentElement.replaceChild(iframe, thisScript);
        </script>
      </div>
    </div>
  </div>
</section>



<footer class="marketing-footer--light-gray">
  <section>
    <ul>
      <li class="logo-wrapper">
        <div class="logo">
          <img src="/assets/images/kong-blue.png" alt="Kong Inc">
        </div>
      </li>
      <li>
        <nav>
          <h4>Company</h4>
          <ul>
            <li><a href="https://konghq.com/about-kong-inc/">About</a></li>
            <li><a href="https://konghq.com/investors/">Investors</a></li>
            <li><a href="http://konghq.com/blog/">Blog</a></li>
            <li><a href="https://konghq.com/jobs/">Jobs</a></li>
            <li><a href="https://konghq.com/contact/">Contact</a></li>
            <li><a href="https://support.konghq.com">Support</a></li>
          </ul>
        </nav>
      </li>
      <li>
        <nav>
          <h4>Products</h4>
          <ul>
            <li><a href="https://docs.konghq.com/">Kong</a></li>
            <li><a href="https://konghq.com/api-dev-portal/">Dev Portal</a></li>
            <li><a href="https://konghq.com/api-analytics/">API Analytics</a></li>
            <li><a href="https://konghq.com/kong-enterprise-edition/">Enterprise</a></li>
          </ul>
        </nav>
      </li>
      <li>
        <nav>
          <h4>Open Source</h4>
          <ul>
            <li><a href="http://mockbin.org/">Mockbin</a></li>
            <li><a href="http://apiembed.com/">API Embed</a></li>
            <li><a href="http://unirest.io/">Unirest</a></li>
            <li><a href="http://guardianjs.com/">Guardian JS</a></li>
            <li><a href="http://oauthbible.com/">OAuth Bible</a></li>
          </ul>
        </nav>
      </li>
      <li>
        <nav>
          <h4>Legal</h4>
          <ul>
            <li><a href="https://konghq.com/terms/">Terms of Service</a></li>
            <li><a href="https://konghq.com/privacy/">Privacy Policy</a></li>
          </ul>
        </nav>
      </li>
    </ul>
  </section>

  <section class="legal">
    <ul>
      <li>
        <span class="mashape-footer-content">&copy; Kong Inc. 2018</span>
      </li>
      <li>
        <div class="social-link">
          <a href="https://github.com/Kong" title="Github"><i aria-label="Github" class="fa fa-github" aria-hidden="true"></i></a></div>
        <div class="social-link">
          <a href="https://www.facebook.com/konghq/" title="Facebook"><i aria-label="Facebook" class="fa fa-facebook-official" aria-hidden="true"></i></a></div>
        <div class="social-link">
          <a href="https://www.meetup.com/topics/kong/all/" title="Meetup"><img aria-label="Meetup" alt="Meetup" src="/assets/images/footer/icn-meetup-black.svg"></a>
        </div>
        <div class="social-link">
          <a href="https://twitter.com/thekonginc" title="Twitter"><i aria-label="Twitter" class="fa fa-twitter" aria-hidden="true"></i></a>
        </div>
      </li>
    </ul>
  </section>
</footer>

    <script>
  var anchorForId = function (id) {
    var anchor = document.createElement("a");
    anchor.className = "header-link";
    anchor.href      = "#" + id;
    anchor.innerHTML = "<span class=\"sr-only\">Permalink</span><i class=\"fa fa-link\"></i>";
    anchor.title = "Permalink";
    return anchor;
  };
  var linkifyAnchors = function (level, containingElement) {
    var headers = containingElement.getElementsByTagName("h" + level);
    for (var h = 0; h < headers.length; h++) {
      var header = headers[h];
      if (typeof header.id !== "undefined" && header.id !== "") {
        header.prepend(anchorForId(header.id));
      }
    }
  };
  document.onreadystatechange = function () {
    if (this.readyState === "complete") {
      var contentBlock = document.getElementById("documentation");
      if (!contentBlock) {
        return;
      }
      for (var level = 1; level <= 6; level++) {
        linkifyAnchors(level, contentBlock);
      }
    }
  };
</script>


    <script src="/assets/app.js?v=1534747998"></script>

    <div id="fb-root"></div>

    <script id="github-bjs" src="https://buttons.github.io/buttons.js" async defer></script>
    <script id="twitter-wjs" type="text/javascript" src="https://platform.twitter.com/widgets.js" async defer></script>
    <script id="facebook-jssdk" type="text/javascript" src="https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.3&appId=842731852424506" async defer></script>

    <script type="text/javascript">
      piAId = '393112';
      piCId = '48375';

      (function() {
        function async_load(){
          var s = document.createElement('script'); s.type = 'text/javascript';
          s.src = ('https:' == document.location.protocol ? 'https://pi' : 'http://cdn') + '.pardot.com/pd.js';
          var c = document.getElementsByTagName('script')[0]; c.parentNode.insertBefore(s, c);
        }
        if(window.attachEvent) { window.attachEvent('onload', async_load); }
        else { window.addEventListener('load', async_load, false); }
      })();
    </script>

    <script type='text/javascript'>
      var _vwo_code=(function(){
      var account_id=125292,
      settings_tolerance=2000,
      library_tolerance=2500,
      use_existing_jquery=true,
      // DO NOT EDIT BELOW THIS LINE
      f=false,d=document;return{use_existing_jquery:function(){return use_existing_jquery;},library_tolerance:function(){return library_tolerance;},finish:function(){if(!f){f=true;var a=d.getElementById('_vis_opt_path_hides');if(a)a.parentNode.removeChild(a);}},finished:function(){return f;},load:function(a){var b=d.createElement('script');b.src=a;b.type='text/javascript';b.innerText;b.onerror=function(){_vwo_code.finish();};d.getElementsByTagName('head')[0].appendChild(b);},init:function(){settings_timer=setTimeout('_vwo_code.finish()',settings_tolerance);this.load('//dev.visualwebsiteoptimizer.com/j.php?a='+account_id+'&u='+encodeURIComponent(d.URL)+'&r='+Math.random());var a=d.createElement('style'),b='',h=d.getElementsByTagName('head')[0];a.setAttribute('id','_vis_opt_path_hides');a.setAttribute('type','text/css');if(a.styleSheet)a.styleSheet.cssText=b;else a.appendChild(d.createTextNode(b));h.appendChild(a);return settings_timer;}};}());_vwo_settings_timer=_vwo_code.init();
    </script>

    <script type="text/javascript">
      !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","group","track","ready","alias","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t){var e=document.createElement("script");e.type="text/javascript";e.async=!0;e.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)};analytics.SNIPPET_VERSION="3.0.1";
        analytics.load("WDj0nSS7hpyxwL3evgbOzK755s0NUye6");
        analytics.page()
      }}();
    </script>

  </body>


</html>
